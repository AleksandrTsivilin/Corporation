
<div class="flex flex-col h-full " *ngIf="pageState.isActive else toMoveNextPage">
  <div>
    <h1>regions</h1>
  </div>
  <div *ngIf="regions.length>1 else showTitleRegion">
    <h1>{{regions.length}}</h1>
  </div>
  <div>
    <h1>factories</h1>
  </div>
  <div *ngIf="factories.length>1 else showTitleFactory">
    <h1>{{factories.length}}</h1>
  </div>
  <div>
    <h1>storages</h1>
  </div>
  <div *ngIf="storages.length>1 else showTitleStorage">
    <h1>{{storages.length}}</h1>
  </div>
  
  <div class="flex overflow-auto">
    <table class="relative w-full border table">
      <thead>
        <tr>
          <th           
            class="sticky top-0 px-6 py-3 text-red-900 bg-red-300 header"
            *ngFor="let header of headersTable"
            (click)=sortCol(header)
            [ngClass]="{'active-header':header.isActive}"
          >
            
              {{header.title}}
            
          </th>    
          
        </tr>
      </thead>
      <tbody class="divide-y bg-red-100">
        <tr app-product-item       
          *ngFor="let productInfo of productsInfo let i=index"
          [ngClass]="{'product-item-warning':productInfo.isBanned}"
          [numProduct]="i+1"
          [productInfo]="productInfo" 
          [avaiablesPermissions]="avaiablesPermissions"
          (edit)="startEdit(productInfo)"
          (remove)="remove(productInfo)"
          (openProductInfo) = "openProductInfo(productInfo)"        
        >  
        </tr>    
      </tbody>
    </table>
  </div>
</div>            

<ng-template #toMoveNextPage>
  <div [ngSwitch]="pageState.path"
  class="h-full" >
    <app-edit-product
      *ngSwitchCase="'editProduct'"
      [newProductForm]="newProductForm"
      (updateProduct)="update($event)"
      (close)="closeEditPage()"
    >     
    </app-edit-product> 
    <app-loading-page
      *ngSwitchCase="'loadingPage'"
      [title]="'products'"
    >
    </app-loading-page> 
    <app-responce500
      *ngSwitchCase="'responce500'"
      
    >
    </app-responce500>
    <app-product-item-info
      *ngSwitchCase="'productInfo'"
      [product]="selectedProduct"
      (close)="closeProductInfo()"
    >
    </app-product-item-info>
  </div>
</ng-template>

<ng-template #showTitleStorage>
  <h1>{{storages[0].title}}</h1>
</ng-template>

<ng-template #showTitleFactory>
  <h1>{{factories[0].title}}</h1>
</ng-template>

<ng-template #showTitleRegion>
  <h1>{{regions[0].title}}</h1>
</ng-template>